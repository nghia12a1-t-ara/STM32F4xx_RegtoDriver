
#include "DMA.h"

void DMA_Init(void)
{
	// 1. Enable DMA1 Clock
	RCC->AHBENR |= 1<<0;

	// 2. Enable DMA Interrupts
	DMA1_Channel6->CCR |= (1<<1)|(1<<2)|(1<<3);  // TCIE, HTIE, TEIE Enabled

	// 3. Set the Data Direction
//	DMA1_Channel7->CCR |= (1<<4);   // Read From Memory
	DMA1_Channel6->CCR &= ~(1<<4);   // Read From Peripheral
	
	// 4. Enable the circular mode (CIRC)
	DMA1_Channel6->CCR |= 1<<5;

	// 5. Enable the Memory Increment (MINC)
	DMA1_Channel6->CCR |= 1<<7;

	// 6. Set the Peripheral data size (PSIZE)
	DMA1_Channel6->CCR &= ~(3<<8);  // 00 : 8 Bit Data

	// 7. Set the Memory data size (MSIZE)
	DMA1_Channel6->CCR &= ~(3<<10);  // 00 : 8 Bit Data

	// 8. Set the Priority Level
	DMA1_Channel6->CCR &= ~(3<<12);  // PL = 0
}
