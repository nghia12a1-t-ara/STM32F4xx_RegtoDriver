
#include "UART_REG.h"
#include "GPIO_REG.h"
#include "CLOCK_REG.h"


void UART_Init(uint_8 Mode)
{
	uint32_t usartdiv;
	uint32_t F_Mass, F_Frac;

	USART6_PCLK_EN();

	GPIOC_UART6_Setup();

	UART6->CR1 |= Mode;

	UART6->CR1 &= ~(1 << 12);

	/* PCLK = 16MHz
	 * Baudrate = 9600
	 * OVER8 = 0 -> sample 16 */
	usartdiv = (25 * 16000000) / (4 * 9600);
	F_Mass = usartdiv / 100;
	F_Frac = usartdiv - (F_Mass * 100);
	F_Frac = ((( F_Frac * 16)+ 50) / 100) & ((uint8_t)0x0F);

	UART6->BRR |= (F_Mass << 4);
	UART6->BRR |= F_Frac;

	UART6->CR1 |= (1 << 13);

}


void UART_SendData(uint8_t * pTXBuffer, uint32_t Len)
{}
void UART_ReceiveData(uint8_t * pRXBuffer, uint32_t Len){}
